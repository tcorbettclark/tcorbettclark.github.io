<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
  <head>
    <meta name="generator" content="HTML Tidy for HTML5 for Apple macOS version 5.8.0" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Timothy Corbett-Clark" />
    <meta name="description" content="Personal website of Dr Timothy Corbett-Clark" />
    <title>
      Dr Timothy Corbett-Clark
    </title>
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity=
    "sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous" />
    <link rel="stylesheet" href=
    "https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css" />
    <link rel="stylesheet" type="text/css" href="/main.css" />
    <script src="https://kit.fontawesome.com/39e34b83e1.js" crossorigin="anonymous"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity=
    "sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"></script>
    <script defer="defer" src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js"
    crossorigin="anonymous"></script>
    <script defer="defer" src="/hot_reloader.js" async="async"></script>
    <script defer="defer" src="/render_maths.js"></script>
    <script defer="defer" src="/render_code.js"></script>
  </head>
  <body>
    <header class="hero is-small is-primary">
      <div class="hero-body">
        <p class="title">
          Dr Timothy Corbett‑Clark
        </p>
        <p class="subtitle">
          CTO, Researcher, Developer
        </p>
      </div>
    </header>
    <nav class="level mt-4 ml-4 mr-4">
      <div class="level-left">
        <div class="level-item">
          <span class="tag"><a href="/welcome/index.html"><i class="fa-solid fa-home"></i> Home</a></span>
        </div>
        <div class="level-item">
          <span class="tag"><a href="index.html"><i class="fa-solid fa-arrow-left"></i> Back to: Building this
          website</a></span>
        </div>
      </div>
      <div class="level-right">
        <div class="level-item">
          <div class="dropdown is-right is-hoverable">
            <div class="dropdown-trigger">
              <span class="tag"><a href="/wip.html"><i class="fa-solid fa-bug"></i>&nbsp;wip</a></span>
            </div>
            <div class="dropdown-menu" role="menu">
              <div class="dropdown-content">
                <div class="dropdown-item has-text-centered has-text-weight-semibold smallcaps">
                  Work in Progress
                </div>
                <hr class="dropdown-divider" />
                <a href="/cv/index.html" class="dropdown-item">Professional career</a> <a href="/about-me/index.html"
                class="dropdown-item">About me</a> <a href="/my-tastes/index.html" class="dropdown-item">My tastes</a>
                <a href="/my-setup/index.html" class="dropdown-item">Setup of my computer</a> <a href=
                "/publications/index.html" class="dropdown-item">Publications</a> <a href=
                "/recreational-maths/index.html" class="dropdown-item">Recreational Maths</a> <a href=
                "/building-this-website/index.html" class="dropdown-item">Building this website</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <section class="section pt-0">
      <div class="box has-background-primary-95">
        <div class="block is-size-2 has-text-centered">
          Content approach
        </div>
        <div class="content draft-watermark">
          <p>
            This page explains how I structured all the web files, templates, and data to achieve this website. It also
            contains my notes on hosting, validation, security, selecting libraries, rendering maths and code nicely,
            making the navigation breadcrumb, choosing colours, creating the favicon and app manifest, making the XML
            sitemap, adding a draft/wip mode, …
          </p>
          <p>
            Hence this page provides <em>recipes</em> for how to achieve the various features of a website. They are
            mostly independent of one another, allowing for easy modification, substitution, or ommission (and the
            agnostic nature of <a href="awg.html">AWG</a> means that nothing is left behind).
          </p>
          <h1>
            File structure
          </h1>
          <p>
            Organisational considerations include:
          </p>
          <ol>
            <li>The purpose of each file, the relationship with other files, and especially how nearby each file is to
            related files.
            </li>
            <li>When the file is loaded by the templating mechanism (<code>{% include %}</code> or <code>{% extends
            %}</code>).
            </li>
            <li>When the file is loaded by the browser.
            </li>
            <li>Where browsers expect or need to find special files.
            </li>
          </ol>
          <p>
            This translates into the following principles:
          </p>
          <ol>
            <li>Use a flat root directory for all files which browsers expect to see there, such as
            <code>robots.txt</code>, <code>sitemap.xml</code>, the app manifest, favicons, etc.
            </li>
            <li>Use a flat root directory for all the files loaded by the base template (<code>_base.html</code>) on
            every page. The base template uses absolute paths.
            </li>
            <li>Only extend templates from the same directory or in parent directories. So the template hierarchy
            overlays the file system hierarchy.
            </li>
            <li>Otherwise, keep related files together in their own directory. And use relative paths.
            </li>
          </ol>
          <p>
            Even though it is traditional, I don’t organise files by type (all javascript in <code>/js/</code>, all css
            in <code>/css/</code>, etc).
          </p>
          <p>
            The result is quite a few files in the root directory, but with the benefit that they are all visible. And
            then each page has its own directory, with child pages in child directories, etc.
          </p>
          <p>
            The template inheritance hierarchy is simple:
          </p>
          <ul>
            <li>The base template is in <code>/_base.html</code>, and includes <code>/_header.html</code> and
            <code>/_footer.html</code>.
            </li>
            <li>The page template is in <code>/_page.html</code>, extends the base template, and adds blocks for the
            breadcrumb, title, page content, and the “page is draft” additions (see below).
            </li>
            <li>Most concrete pages then extend the page template (the welcome page being an exception, as it alters
            the layout to have a sidebar card).
            </li>
          </ul>
          <h1>
            Indentation management
          </h1>
          <p>
            All HTML files are indented for clarity during editing. On output after templating, they are all formatted
            properly by <a href="awg.html">AWG</a>, so there is no need to try to generate properly indented HTML
            within the templates (avoiding fiddly whitespace management with “-” in e.g. <code>{%- ... %}</code>). For
            example, the indentation below is entirely to aid readability at the template stage (rather than final
            HTML).
          </p>
          <pre><code class="language-HTML">{% extends "../_page.html" %}

{% block breadcrumb %}
    {{ super() }}
    &lt;div class="level-item"&gt;
        &lt;span class="tag"&gt;
            &lt;a href="index.html"&gt;&lt;i class="fa-solid fa-arrow-left"&gt;&lt;/i&gt; Back to: Building this website&lt;/a&gt;
        &lt;/span&gt;
    &lt;/div&gt;
{% endblock breadcrumb %}

{% block title %} Content approach {% endblock title %}

{% block page %}
    {{ "_approach.md" | markdown() }}
{% endblock page %}
</code></pre>
          <p>
            To make editing easy with language specific editing/formatting/colourising modes, I avoid files containing
            a mixture of languages. Hence there are separate files for each piece of markdown, no “frontmatter”
            TOML/YAML within markdown files, javascript is always included from <code>.js</code> files, etc.
          </p>
          <h1>
            Choice of web framework
          </h1>
          <p>
            There are many to choose from, but I selected <a href="https://bulma.io">Bulma</a> because it is CSS only
            (no javascript), looks good, is well documented, very popular, and actively maintained. I like it’s
            responsive layout and support for colour management.
          </p>
          <p>
            The two closest alternatives were:
          </p>
          <ul>
            <li>
              <a href="https://getbootstrap.com">Bootstrap</a>, which is older, bit boring looking now, and slightly
              heavier weight than I need.
            </li>
            <li>
              <a href="https://getuikit.com">UIkit</a>, which looks slick, but is perhaps more intended for
              applications. Also there is less support e.g. for colours.
            </li>
          </ul>
          <h1>
            Maths
          </h1>
          <p>
            For any substantial maths I create PDFs using <a href="https://typst.app">Typst</a>, but for immediately
            visible maths in the browser I use the javascript library, <a href="https://katex.org">KaTeX</a>. Other
            libraries exist but Katex is well maintained, popular, and fast.
          </p>
          <p>
            The Common Markdown parser used by <a href="awg.html">AWG</a> includes the <a href=
            "https://mdit-py-plugins.readthedocs.io/en/latest/#mdit_py_plugins.dollarmath.dollarmath_plugin">dollarmath_plugin</a>.
            It produces inline and block maths with the following HTML markup:
          </p>
          <pre><code class="language-HTML">&lt;span class="math inline"&gt; ...latex maths... &lt;/span&gt;
&lt;div class="math block"&gt; ...latex maths... &lt;/div&gt;
</code></pre>
          <p>
            A small amount of javascript makes KaTeX render on the correct elements after the DOM has loaded:
          </p>
          <pre><code class="language-javascript">document.addEventListener("DOMContentLoaded", (event) =&gt; {
  for (var node of document.getElementsByClassName("math")) {
    katex.render(node.innerText, node, {
      displayMode: node.classList.contains("block"), // otherwise assume it is "inline"
      throwOnError: false,
    });
  }
});
</code></pre>
          <p>
            I put this javascript in the file <code>/render_maths.js</code> and load it in the
            <code>&lt;head&gt;</code> tag of the base template. This is also where we load the KaTeX library (both
            javascript and CSS) from the <a href="https://cdn.jsdelivr.net">jsDelivr CDN</a>:
          </p>
          <pre><code class="language-HTML">&lt;head&gt;
    ...
    &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.css" integrity="sha384-5TcZemv2l/9On385z///+d7MSYlvIEw9FuZTIdZ14vJLqWphw7e7ZPuOiCHJcFCP" crossorigin="anonymous"&gt;
    ...
    &lt;script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.22/dist/katex.min.js" integrity="sha384-cMkvdD8LoxVzGF/RPUKAcvmm49FQ0oxwDF3BGKtDXcEc+T1b2N+teh/OJfpU0jr6" crossorigin="anonymous"&gt;&lt;/script&gt;
    ...
    &lt;script defer src="/render_maths.js"&gt;&lt;/script&gt;
    ...
&lt;/head&gt;
</code></pre>
          <p>
            The result is for markdown like
          </p>
          <pre><code class=
          "language-markdown">For example, inline maths looks like $(x+1)^2 - (x-1)^2 = 4x$, and block maths like

$$
\sum_{k=1}^n { k! \over (1+k)^2 }
$$
</code></pre>
          <p>
            to be displayed as
          </p>
          <blockquote>
            <p>
              For example, inline maths looks like <span class="math inline">(x+1)^2 - (x-1)^2 = 4x</span>, and block
              maths like
            </p>
            <div class="math block">
              \sum_{k=1}^n { k! \over (1+k)^2 }
            </div>
          </blockquote>
          <h1>
            Code
          </h1>
          <p>
            Highlighting code is easy with <a href="https://highlightjs.org">highlight.js</a>. This will colour many
            different programming languages in any of a number of different themes, expecting HTML markup like
          </p>
          <pre><code class=
          "language-HTML">&lt;pre&gt;&lt;code class="language-python"&gt; ...python code... &lt;/code&gt;&lt;/pre&gt;
</code></pre>
          <p>
            The Common Markdown standard used by <a href="awg.html">AWG</a> has <a href=
            "https://spec.commonmark.org/0.31.2/#fenced-code-blocks">fenced code blocks</a> which produces tags with
            CSS classes exactly like this.
          </p>
          <p>
            So we just need to pull in the Javascript and chosen theme CSS (in this case, <code>atom-one-dark</code>)
            from a CDN, and ask it to render once the page has loaded. Hence the <code>&lt;head&gt;</code> section of
            the base template contains:
          </p>
          <pre><code class="language-HTML">&lt;head&gt;
    ...
    &lt;link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/styles/atom-one-dark.min.css"&gt;
    ...
    &lt;script defer src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.9.0/build/highlight.min.js" crossorigin="anonymous"&gt;&lt;/script&gt;
    ...
    &lt;script defer src="/render_code.js"&gt;&lt;/script&gt;
    ...
&lt;/head&gt;
</code></pre>
          <p>
            and the contents of <code>/render_code.js</code> runs the highlighter after all the DOM content is present
            and correct:
          </p>
          <pre><code class="language-Javascript">document.addEventListener("DOMContentLoaded", (event) =&gt; {
  hljs.highlightAll();
});
</code></pre>
          <p>
            Of course, the above demonstrates the formatting of some HTML and Javascript code.
          </p>
          <h1>
            Navigation breadcrumb
          </h1>
          <p>
            The navigation breadcrumb works by sub-templating, calling <code>{{ super() }}</code> to retain the
            navigation from above. So the pattern is as follows (ignoring all styling).
          </p>
          <p>
            In the base template
          </p>
          <pre><code class="language-HTML">&lt;!-- This is the base template: /_page.html --&gt;
&lt;nav class="navigation"&gt;
    {% block breadcrumb %}
    {% endblock breadcrumb %}
&lt;/nav&gt;


&lt;!-- Then in a subclass template in a sub-directory, e.g. /a/_foo.html --&gt;
{% extends "../_page.html" %}

{% block breadcrumb %}
    {{ super() }}
    &lt;a href="/"&gt;Home&lt;/a&gt;
{% endblock breadcrumb%}


&lt;!-- And then again, e.g. in /a/b/_bar.html --&gt;
{% extends "../_foo.html" %}

{% block breadcrumb %}
    {{ super() }}
    &lt;a href="../index.html"&gt;Back to Recreational Maths&lt;/a&gt;
{% endblock breadcrumb%}
</code></pre>
          <h1>
            Manifest and favicon
          </h1>
          <p>
            TODO: explain webmanifest file, especially for favicons. See https://www.w3.org/TR/appmanifest/.
          </p>
          <p>
            TODO does favicon.ico and apple xxx need to go in root directory to be found? At least one validator
            suggested so…
          </p>
          <h1>
            Colour, styling, and night view
          </h1>
          <p>
            TODO
          </p>
          <p>
            Need to keep Bulma, manifest, and favicon theme colours in sync.
          </p>
          <p>
            Simple “tcc” Favicon generated using https://favicon.io/favicon-generator/, using the same primary colour
            as configured in Bulma.
          </p>
          <p>
            Refer to all the help from Bulma, and therefore what is left to do.
          </p>
          <p>
            Talk about night view.
          </p>
          <p>
            Talk about different standards of RGB (use Standard RGB or sRGB).
          </p>
          <p>
            Useful learning about colours:
          </p>
          <ul>
            <li>https://www.learnui.design/blog/the-hsb-color-system-practicioners-primer.html
            </li>
            <li>https://www.learnui.design/blog/color-in-ui-design-a-practical-framework.html
            </li>
          </ul>
          <p>
            Useful tools:
          </p>
          <ul>
            <li>
              <p>
                https://www.canva.com/colors/color-wheel/
              </p>
            </li>
            <li>
              <p>
                https://colorhunt.co
              </p>
            </li>
            <li>
              <p>
                https://coolors.co
              </p>
            </li>
            <li>
              <p>
                https://pixelied.com/colors/color-wheel
              </p>
            </li>
            <li>
              <p>
                Colour consistency (e.g. manifest, favicon, and page theme).
              </p>
            </li>
            <li>
              <p>
                Colour contrast ratio. TODO link to tools.
              </p>
            </li>
            <li>
              <p>
                Colours in both day and night mode.
              </p>
            </li>
          </ul>
          <h1>
            XML sitemap
          </h1>
          <p>
            Simply done by putting the data into a <code>_sitemap.toml</code> and writing a template
            <code>sitemap.xml</code>. Then linking to it from <code>robots.txt</code>.
          </p>
          <h1>
            DRAFT mode
          </h1>
          <p>
            CSS watermark switch passed in to top level templates The <code>/wip.html</code> page and the “hidden” link
            in right side of the navigation (breadcrumb) space. So now often I can commit and push to master, and
            github will publish. Streamlined workflow. Only use branches with pull requests for larger stuff.
          </p>
          <p>
            And now I can test draft pages with w3 validator, on different devices etc.
          </p>
          <p>
            I don’t really care that people can see such pages - the watermark makes it obvious. And the search engines
            start to see something arriving, changing often, which speeds up indexing to make more discoverable (not
            that that really matters, but is nice).
          </p>
          <p>
            Also, no separate dev build and live build - all one and the same.
          </p>
          <h1>
            Validation
          </h1>
          <p>
            Iterating with various (free) validation sites makes it easy to check for correctness, best practice, and
            learn about the web world. For example:
          </p>
          <ul>
            <li>
              <a href="https://validator.w3.org/nu/">W3 Validator</a>
            </li>
            <li>
              <a href="https://developer.mozilla.org/en-US/observatory">MDN’s Observatory tool</a>
            </li>
            <li>
              <a href="https://www.validbot.com/">ValidBot</a>
            </li>
          </ul>
          <p>
            Notable issues I could not address include:
          </p>
          <ol>
            <li>The existence of trailing slashes on void elements such as <code>meta</code> and <code>link</code>
            tags. These cannot be fixed by hand because <a href="awg.html">AWG</a> checks and formats all HTML with
            <a href="https://html-tidy.org">HTML Tidy</a>, produces such trailing slashes. The main concern (see
            <a href="https://wet-boew.github.io/wet-boew-documentation/decision/15.html">here</a> and <a href=
            "https://github.com/validator/validator/wiki/Markup-%C2%BB-Void-elements#trailing-slashes">here</a>) seems
            to be that because HTML5 is not XML, and since href arguments don’t have to be quoted, there is an
            ambiguity if the href is the last attribute and the url contains a trailing slash. Compare:
              <pre><code>&lt;link href=https://foo.bar.baz/&gt;
&lt;link href="https://foo.bar.baz"/&gt;
&lt;link href="https://foo.bar.baz/"&gt;
</code></pre>This isn’t a problem so long as we always quote href’s.
            </li>
            <li>TODO, add more…
            </li>
          </ol>
          <h1>
            Security
          </h1>
          <p>
            TODO: Use validation tools (esp MDN Overservatory) and http-equv-header in meta tag.
          </p>
          <h1>
            Deployment on GitHub pages
          </h1>
          <p>
            It is easy and convenient to host static content on <a href="https://pages.github.com">GitHub pages</a>.
          </p>
          <p>
            One can either use files from a git branch, the root directory of the repository, or a directory called
            <code>docs/</code>. It would be nice to be able to use a different directory name, but so be it. I just use
            the <code>docs/</code> directory on the master branch.
          </p>
          <p>
            A custom domain can be used by creating a <code>CNAME</code> file containing the full domain (in my case,
            <code>www.corbettclark.com</code>).
          </p>
          <p>
            The default GitHub action detects code commits and deploys on their infrastructure, making the result
            visible within a couple of minutes (often faster).
          </p>
          <p>
            As I’m the only person making changes, I mostly dispense with creating a branch and making a pull request
            to myself (<a href="https://docs.github.com/en/get-started/using-github/github-flow">GitHub flow</a>), but
            instead just make a number of meaningful commits locally. Then when ready to publish, I git push to GitHub.
            In short, my workflow is:
          </p>
          <ul>
            <li>Start up <a href="awg.html">AWG</a> with <code>./awg.py content/ docs/</code>
            </li>
            <li>Repeat until ready to publish:
              <ul>
                <li>Make changes and check in local browser without leaving my editor (because of hot reload).
                </li>
                <li>Commit locally using git.
                </li>
              </ul>
            </li>
            <li>Git push to GitHub.
            </li>
            <li>After a minute or so, check the changes have reached live ok.
            </li>
          </ul>
        </div>
      </div>
    </section>
    <footer class="footer pt-4 pb-4">
      <div class="has-text-centered">
        <p>
          <span class="icon-text"><span class="icon"><i class="fa-regular fa-copyright"></i></span> <span>Timothy
          Corbett-Clark, 2025</span></span>
        </p>
        <p>
          Website (<a href="https://github.com/tcorbettclark/tcorbettclark.github.io" target="_blank">src</a>) built
          using <a href="https://www.python.org/" target="_blank">Python</a>, <a href=
          "https://jinja.palletsprojects.com/" target="_blank">Jinja</a>, <a href=
          "https://daringfireball.net/projects/markdown/" target="_blank">Markdown</a>, and <a href="https://bulma.io/"
          target="_blank">Bulma</a>.
        </p>
      </div>
    </footer>
  </body>
</html>
